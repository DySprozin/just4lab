function calc_sel(act) { if (act == 'x') act = document.getElementById("calc_select").value; ajax_req.open("GET", "/lab/calc/ajax.php?act=" + act, true); ajax_req.onreadystatechange = function() {  if (ajax_req.readyState == 4 && ajax_req.status == 200) {   var req = ajax_req.responseText.split('#');   document.getElementById("calc_arg").innerHTML = '<select class="calc_select" id="formula_chem" name="formula_chem">' + req[0] + '</select>';   document.getElementById("calc_arg_txt").innerHTML = req[1] + '&nbsp;';   document.getElementById("calc_ans_txt").innerHTML = req[2] + '&nbsp;';  } } ajax_req.send(null);}function calc_ans() { var req; var req1; var calc_input = document.getElementById("calc_input").value; var formula_chem = document.getElementById("formula_chem").value; ajax_req.open("GET", "/lab/calc/ajax.php?calc_ans=" + escape(calc_input) + "&formula_chem=" + escape(formula_chem), true); ajax_req.onreadystatechange = function() {  if (ajax_req.readyState == 4 && ajax_req.status == 200) {   //alert(ajax_req.responseText);   req = ajax_req.responseText.split('!!!');   if (req[0] != '') {    alert("Ой... Ошибка! Спасибо, мы в уже в курсе. Скоро она будет исправлена.");	return;   }   document.getElementById("calc_source").style.display = 'block';   if (req[4] != '') req[1] = '<b>Источник:</b> ' + req[1];   else req[1] = '<b>Ошибка:</b> ' + req[1];   req[3] = '<b>Расчет:</b> ' + req[3];   if (req[2] != "lin") {    req1 = req[2] + "<br>" + req[1];    document.getElementById("calc_lin").style.display = 'none';   }   else {    req1 = req[1];    document.getElementById("calc_lin").style.display = 'block';   }   if (req[3] != '<b>Расчет:</b> ') req1 = req[3] + ' = ' + req[4] + '<br>' + req1;   document.getElementById("calc_source").innerHTML =  req1 + '&nbsp;';   document.getElementById("calc_answer").innerHTML =  req[4];  } } ajax_req.send(null);}